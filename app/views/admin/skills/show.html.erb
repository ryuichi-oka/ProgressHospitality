<div class="container">
  <%= link_to "⇐店舗一覧に戻る", admin_groups_path %>
  <h2>スキル詳細</h2>
  <%= link_to "⇐スキル一覧", admin_skills_path(group_id: @group.id) %>
  <%= link_to "編集", edit_admin_skill_path(@skill.id) %>
  <div class="skillContent">
    <div class="skillContent__heading">
      <table>
        <thead>
          <tr>
            <th width="10%">業務種別</th>
            <th width="30%">スキル名称</th>
            <th width="10%">ランク</th>
            <th width="10%">公開／非公開</th>
            <th width="20%">登録日時</th>
            <th width="20%">最終更新日時</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><%= @skill.work_type.work_type %></td>
            <td><%= @skill.name %></td>
            <td><%= @skill.rank_i18n %></td>
            <td>
              <% if @skill.is_active %>
                <p>公開</p>
              <% else %>
                <p>非公開</p>
              <% end %>
            </td>
            <td><%= l @skill.created_at, format: :long %></td>
            <td><%= l @skill.updated_at, format: :long %></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="skillContent__main">
      <div class="skillContent__main--left field">
        <div class="skillContent__body">
          <h4 class="field__title">スキル概要</h4>
          <p class="field__text"><%= @skill.body %></p>
        </div>
        <div class="skillContent__terms">
          <h4 class="field__title">習得条件</h4>
          <p class="field__text"><%= @skill.terms %></p>
        </div>
      </div>
      <div class="skillContent__main--right">
        <div class="skillDetails">
          <h4 class="field__title">必要技術</h4>
          <% @skill_details.each do |skill_detail| %>
          <div class="skillDetails__list">
            <p class="skillDetails__item"><%= skill_detail.body %></p>
            <button class="skillDetails__edit">編集</button>
            <button class="skillDetails__destroy"><%= link_to "削除", admin_skill_detail_path(skill_detail.id), method: :delete, "data-confirm" => "本当に削除しますか？" %></button>
          </div>
          <% end %>
          <div class="skillDetails__form">
            <%= form_with model: @skill_detail, url: admin_skill_details_path, local: true do |f| %>
              <%= f.hidden_field :skill_id, value: @skill.id %>
              <div class="skillDetails__form--body">
                <%= f.text_field :body %>
              </div>
              <div class="skillDetails__form--submit">
                <%= f.submit "登録" %>
              </div>
            <% end %>
          </div>
        </div>
        <div class="skillManuals">
          <h4 class="field__title">関連マニュアル</h4>
          <% @skill_manuals.each do |skill_manual| %>
          <div class="skillManual__list">
            <p class="skillManual__item"><%= link_to skill_manual.manual.name, admin_manual_path(skill_manual.manual.id) %></p>
            <button class="skillManual__destroy"><%= link_to "削除", admin_skill_manual_path(skill_manual.id), method: :delete, "data-confirm" => "本当に削除しますか？" %></button>
          </div>
          <% end %>
          <div class="skillManuals__form">
            <%= form_with model: @skill_manual, url: admin_skill_manuals_path, local: true do |f| %>
            <%= f.hidden_field :skill_id, value: @skill.id %>
            <div class="skillManuals__form--select">
              <%= f.collection_select :manual_id, Manual.order(:name), :id, :name %>
            </div>
            <div class="skillManuals__form--submit">
              <%= f.submit "登録" %>
            </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>