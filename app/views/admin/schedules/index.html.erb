<div class="container">
  <div class="container__links">
    <div class="links">
      <h4 class="links__title"><i class="fas fa-caret-right"></i><%= @day.year.to_s + "年" + params[:month].to_s + "月" %>シフト</h4>
      <div class="monthSelect">
      <%= form_with model: @schedule, url: admin_schedules_path(group_id: @group_id), method: :get do |f| %>
        <%= f.hidden_field :group_id, value: @group_id %>
        <%= f.select :month, 1..12, { include_blank: @month } %>月
        <%= f.submit "表示", :name => nil %>
      <% end %>
      </div>

      <%= link_to(admin_group_path(@group_id), class: "links__item") do %>
        <span><i class="fas fa-caret-left"></i>店舗に戻る</span>
      <% end %>
    </div>
  </div>


  <div class="schedules">
    <div class="schedules__table">
      <table>
        <thead class="schedules__thead">
          <tr>
            <th class="schedules__thead--name">メンバー</th>
            <% @schedule_data.each do |date| %>
            <th class="schedules__thead--day"><%= date.day.to_s + "日" %></th>
            <% end %>
          </tr>
        </thead>
        <tbody class="schedules__tbody">
          <% @members.each do |member| %>
          <tr>
            <td class="schedules__tbody--name">
              <%= link_to (member.last_name + member.first_name), admin_member_path(member.id), data: {"turbolinks" => false} %>
              <%= link_to "Edit", admin_shift_edit_path(member_id: member.id, month: @month) %>
              <%= link_to 'New', new_admin_schedule_path(member_id: member.id, month: @month) %>
            </td>
            <% member.shifts.where(month: @from_date..@to_date).each do |shift| %>
              <td class="schedules__tbody--day">
                <% if shift.shift == nil %>
                  <%= '' %>
                <% else %>
                  <%= shift.shift.to_time.strftime("%H:%M") %><br>
                  <%= shift.shift_end.to_time.strftime("%H:%M") %>
                <% end %>
              </td>
              <% end %>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

